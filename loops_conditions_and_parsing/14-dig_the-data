#!/usr/bin/env bash
#w
awk '
{
  ip=""; status="";
  # Look for IP-like string anywhere in the line (IPv4)
  for(i=1;i<=NF;i++) {
    if ($i ~ /^[0-9]{1,3}(\.[0-9]{1,3}){3}$/) {
      ip=$i; break;
    }
  }
  # Look for status code: any 3-digit number (likely 100-599)
  for(i=1;i<=NF;i++) {
    if ($i ~ /^[1-5][0-9][0-9]$/) {
      status=$i; break;
    }
  }
  if(ip != "" && status != "") print ip, status;
}
' apache-access.log | sort | uniq -c | sort -rn | awk '{print $1, $2, $3}'

